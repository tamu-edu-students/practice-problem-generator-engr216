<head>
  <%= stylesheet_link_tag 'manage_students', media: 'all', 'data-turbolinks-track': 'reload' %>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet">
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>

<div class="w-full flex flex-col bg-[#9aa8c5]">
  <div class="navbar bg-black text-white px-6 w-full fixed top-0 z-50">
    <div class="flex-1">
      <a href="/teacher_dashboard" class="btn bg-transparent text-white border-transparent hover:border-blue-700 hover:bg-blue-500 hover:text-white transition">
        Dashboard
      </a>
    </div>
    <div class="flex-none">
      <div class="dropdown dropdown-end">
        <button class="btn bg-transparent text-white border-transparent hover:border-blue-700 hover:bg-blue-500 hover:text-white transition">
          Account ▼
        </button>
        <ul class="dropdown-content menu p-2 shadow bg-black text-white rounded-box w-36">
          <li><a href="/dashboard">Dashboard</a></li>
          <li><a href="/logout">Logout</a></li>
        </ul>
      </div>
    </div>
  </div>

  <%= link_to "←", teacher_dashboard_path, 
    id: "back-arrow",
    class: "fixed left-5 top-24 text-black text-2xl inline-block z-50", 
    style: "text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;" %>

  <div class="w-full mt-28 px-6 flex items-center justify-center">
    <h1 class="text-4xl font-bold text-black">Student History Dashboard</h1>
  </div>

  <div class="flex flex-col items-center justify-center flex-grow w-full text-center p-6">
    <div class="w-full max-w-4xl bg-black text-white shadow-lg rounded-lg p-6">
      <!-- Summary Table -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold text-white-300 mb-4">Class Performance</h2>
        <table class="table w-full text-left">
          <thead>
            <tr class="text-white border-b border-gray-500">
              <th class="p-2 text-left">Category</th>
              <th class="p-2 text-left">Attempted</th>
              <th class="p-2 text-left">Correct</th>
              <th class="p-2 text-left">Incorrect</th>
              <th class="p-2 text-left">Percentage</th>
            </tr>
          </thead>
          <tbody>
            <% @category_summaries.each do |category, stats| %>
              <tr class="border-b border-gray-700">
                <td class="p-3"><%= category %></td>
                <td class="p-3"><%= stats[:attempted] %></td>
                <td class="p-3" style="color: #34d399;"><%= stats[:correct] %></td>
                <td class="p-3" style="color: #f87171;"><%= stats[:incorrect] %></td>
                <td class="p-3"><%= stats[:percentage] %>%</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <!-- Students Table -->
      <table class="table w-full">
        <thead>
          <tr class="text-white border-b border-gray-500">
            <th class="p-2 text-left">Student Name</th>
            <th class="p-2 text-left">UIN</th>
          </tr>
        </thead>
        <tbody>
          <% @students.each do |student| %>
            <tr class="border-b border-gray-700">
              <td class="p-3">
                <%= link_to "#{student.first_name} #{student.last_name}", 
                            student_history_path(uin: student.uin), 
                            class: "text-blue-400 hover:text-blue-600" %>
              </td>
              <td class="p-3"><%= student.uin %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>