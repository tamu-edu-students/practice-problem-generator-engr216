<head>
  <%= stylesheet_link_tag 'manage_students', media: 'all', 'data-turbolinks-track': 'reload' %>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet">
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>

<div class="w-full flex flex-col bg-[#9aa8c5] min-h-screen">
  <!-- Navbar -->
  <div class="navbar bg-gray-900 text-white px-6 w-full fixed top-0 z-50 shadow-lg">
    <div class="flex-1">
      <a href="/teacher_dashboard" class="btn btn-ghost text-white hover:bg-blue-700 hover:text-white transition">
        Dashboard
      </a>
    </div>
    <div class="flex-none">
      <div class="dropdown dropdown-end">
        <button class="btn btn-ghost text-white hover:bg-blue-700 hover:text-white transition">
          Account ▼
        </button>
        <ul class="dropdown-content menu p-2 shadow bg-gray-800 text-white rounded-box w-36">
          <li><a href="/dashboard" class="hover:bg-blue-600">Dashboard</a></li>
          <li><a href="/logout" class="hover:bg-blue-600">Logout</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Back Arrow -->
  <%= link_to "←", student_history_dashboard_path, 
    id: "back-arrow",
    class: "fixed left-5 top-24 text-gray-800 text-3xl font-bold z-50 hover:text-blue-600 transition",
    style: "text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);" %>

  <!-- Title -->
  <div class="w-full mt-28 px-6 flex items-center justify-center">
    <h1 class="text-4xl font-bold text-gray-900 bg-white px-4 py-2 rounded-lg shadow-md">
      <%= "#{@student.first_name} #{@student.last_name} Statistics & History" %>
    </h1>
  </div>

  <!-- Content -->
  <div class="flex flex-col items-center justify-center flex-grow w-full text-center p-6">
    <div class="w-full max-w-7xl bg-gray-800 text-white shadow-xl rounded-lg p-6">
      <!-- Summary -->
      <div class="mb-6 bg-gray-900 p-4 rounded-lg shadow-inner">
        <div class="grid grid-cols-2 gap-4 text-lg">
          <p class="font-semibold text-blue-300">Attempted: <span class="text-white"><%= @attempted %></span></p>
          <p class="font-semibold text-blue-300">Correct: <span class="text-green-400"><%= @correct %></span></p>
          <p class="font-semibold text-blue-300">Incorrect: <span class="text-red-400"><%= @incorrect %></span></p>
          <p class="font-semibold text-blue-300">Percentage Correct: <span class="text-white"><%= @percentage_correct %></span></p>
        </div>
      </div>

      <!-- Questions Table -->
      <div class="overflow-x-auto">
        <table class="table w-full table-fixed text-left">
          <thead>
            <tr class="bg-gray-700 text-white border-b border-gray-600">
              <th class="p-3 text-blue-300 w-1/4">Category</th>
              <th class="p-3 text-blue-300 w-1/2">Question</th>
              <th class="p-3 text-blue-300 w-1/4">Correctness</th>
            </tr>
          </thead>
          <tbody>
            <% @completed_questions.each do |answer| %>
              <tr class="border-b border-gray-700 hover:bg-gray-700 transition">
                <td class="p-3 align-top break-words"><%= answer.category %></td>
                <td class="p-3 align-top break-words"><%= answer.question_description %></td>
                <td class="p-3 align-top text-center <%= answer.correctness ? 'text-green-400' : 'text-red-400' %>">
                  <%= answer.correctness ? 'Yes' : 'No' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>